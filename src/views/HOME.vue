<template>
  <div class="relative min-h-screen w-full overflow-x-hidden bg-[#F2F4F8] text-slate-700 font-sans selection:bg-uma-turf/30">
    
    <!-- ğŸŸ¢ è£…é¥°èƒŒæ™¯ -->
    <div class="fixed inset-0 z-0 pointer-events-none opacity-40" style="background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 24px 24px;">
    </div>

    <!-- ğŸ§­ é¡¶éƒ¨å¯¼èˆªæ  (æ¸¸æˆèœå•é£æ ¼) -->
    <header class="sticky top-0 z-50 w-full bg-white/90 backdrop-blur-md border-b-4 border-uma-turf shadow-sm">
      <div class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
        <!-- Logo -->
        <div class="flex items-center gap-2 group cursor-pointer transition-transform active:scale-95">
          <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-uma-turf shadow-lg shadow-green-500/20 rotate-3 group-hover:rotate-0 transition-transform">
            <span class="text-xl font-black text-white">U</span>
          </div>
          <span class="text-xl font-black tracking-tighter text-slate-800">
            Uma<span class="text-uma-turf">Fan</span>
          </span>
        </div>

        <!-- æœç´¢æ  (æ¡Œé¢ç«¯) -->
        <div class="hidden max-w-md flex-1 items-center justify-center px-8 md:flex">
          <div class="relative w-full group">
            <Search class="absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-slate-400 transition-colors group-focus-within:text-uma-turf" />
            <input 
              type="text" 
              placeholder="æœç´¢æ”»ç•¥ã€è§’è‰²ã€æ ‡ç­¾..." 
              class="h-11 w-full rounded-full border-2 border-slate-200 bg-slate-50 px-10 text-sm font-medium text-slate-700 placeholder:text-slate-400 focus:border-uma-turf focus:bg-white focus:outline-none focus:ring-4 focus:ring-green-100 transition-all shadow-inner"
            >
          </div>
        </div>

        <!-- å³ä¾§æ“ä½œåŒº -->
        <div class="flex items-center gap-3">
          <!-- ç§»åŠ¨ç«¯æ ¸å¿ƒåŠŸèƒ½ï¼šç²‰ä¸æ•°æ®æŸ¥è¯¢ (é«˜äº®æ˜¾ç¤º) -->
          <button 
            @click="router.push('/dashboard')"
            class="uma-btn bg-gradient-to-r from-uma-turf to-green-500 text-white border-green-700 px-4 py-1.5 text-xs lg:hidden shadow-lg shadow-green-500/30 flex items-center gap-2"
          >
            <DataAnalysis class="h-4 w-4" />
            <span>æŸ¥ç²‰ä¸</span>
          </button>

          <button class="uma-btn bg-white border-slate-200 text-slate-700 hover:bg-slate-50 border-b-4 px-6 py-2 text-sm hidden sm:block">
            ç™»å½•
          </button>
          
          <button 
            @click="mobileMenuOpen = true"
            class="uma-btn flex h-10 w-10 items-center justify-center bg-white border-slate-200 text-slate-600 lg:hidden"
          >
            <Menu class="h-5 w-5" />
          </button>
        </div>
      </div>
    </header>

    <!-- ğŸ“¦ ä¸»è¦å†…å®¹åŒº -->
    <main class="relative z-10 mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
      <div class="flex flex-col gap-8 lg:flex-row">
        
        <!-- å·¦ä¾§ï¼šæ”»ç•¥åˆ—è¡¨ -->
        <div class="flex-1 min-w-0">
          <!-- æ ‡é¢˜åŒº -->
          <div class="mb-8 flex items-end justify-between border-b-2 border-slate-200 pb-4">
            <div>
              <h1 class="text-3xl font-black text-slate-800 sm:text-4xl flex items-center gap-2">
                <span class="text-uma-turf">#</span> æ”»ç•¥ä¸­å¿ƒ
              </h1>
              <p class="mt-2 text-sm font-bold text-slate-500">ç²¾é€‰èµ›é©¬å¨˜è‚²æˆæŒ‡å—ä¸æ•°æ®åˆ†æ</p>
            </div>
            <div class="hidden gap-2 sm:flex">
              <button class="uma-btn bg-uma-turf border-green-700 text-white px-4 py-1.5 text-xs">æœ€æ–°</button>
              <button class="uma-btn bg-white border-slate-200 text-slate-500 px-4 py-1.5 text-xs hover:text-uma-turf">æœ€çƒ­</button>
            </div>
          </div>

          <!-- å¡ç‰‡ç½‘æ ¼ (Support Card é£æ ¼) -->
          <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-3">
            <article 
              v-for="(item, index) in guideList" 
              :key="index"
              class="uma-card group relative flex flex-col overflow-hidden h-full"
            >
              <!-- å›¾ç‰‡å ä½ (å¡é¢) -->
              <div class="aspect-[16/9] w-full overflow-hidden bg-slate-100 relative border-b-4 border-uma-turf">
                <div class="absolute inset-0 bg-slate-200 flex items-center justify-center text-slate-300">
                   <!-- å ä½å›¾æ ‡: é©¬è¹„é“ -->
                   <svg class="w-16 h-16 opacity-30" viewBox="0 0 24 24" fill="currentColor">
                     <path d="M19,5.5H16.5C16.5,4.1 15.4,3 14,3H10C8.6,3 7.5,4.1 7.5,5.5H5A2.5,2.5 0 0,0 2.5,8V18A2.5,2.5 0 0,0 5,20.5H19A2.5,2.5 0 0,0 21.5,18V8A2.5,2.5 0 0,0 19,5.5M5,18V8H7.5V11.5H9.5V8H14.5V11.5H16.5V8H19V18H5Z" />
                   </svg>
                </div>
                
                <img 
                  v-if="item.image" 
                  :src="item.image" 
                  :alt="item.title"
                  class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"
                />
                
                <!-- ç±»å‹æ ‡ç­¾ (å·¦ä¸Šè§’) -->
                <div class="absolute top-0 left-0 bg-yellow-400 text-yellow-900 border-b-2 border-r-2 border-white px-3 py-1 text-xs font-black shadow-md rounded-br-lg z-10">
                  {{ item.category }}
                </div>
              </div>

              <!-- å†…å®¹ -->
              <div class="flex flex-1 flex-col p-4 bg-white">
                <h3 class="mb-3 text-lg font-bold leading-snug text-slate-800 line-clamp-2 group-hover:text-uma-turf transition-colors">
                  {{ item.title }}
                </h3>
                
                <div class="mt-auto flex items-center justify-between border-t border-slate-100 pt-3">
                  <div class="flex gap-2 flex-wrap">
                    <span v-for="tag in item.tags" :key="tag" class="text-[10px] font-bold text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full">
                      {{ tag }}
                    </span>
                  </div>
                  <span class="text-[10px] font-bold text-slate-400 flex items-center gap-1">
                    ğŸ•’ {{ item.time }} min
                  </span>
                </div>
              </div>
            </article>
          </div>

          <!-- åˆ†é¡µ -->
          <div class="mt-12 flex justify-center">
            <nav class="flex items-center gap-2 rounded-full bg-white p-2 shadow-sm border border-slate-100">
              <button class="w-8 h-8 flex items-center justify-center rounded-full text-slate-400 hover:bg-slate-100 disabled:opacity-50">
                <ArrowLeft class="w-4 h-4"/>
              </button>
              <span class="w-8 h-8 flex items-center justify-center rounded-full bg-uma-turf text-white font-bold text-sm shadow-md">1</span>
              <button class="w-8 h-8 flex items-center justify-center rounded-full text-slate-600 hover:bg-slate-100 font-bold text-sm">2</button>
              <button class="w-8 h-8 flex items-center justify-center rounded-full text-slate-600 hover:bg-slate-100 font-bold text-sm">3</button>
              <span class="text-slate-300">...</span>
              <button class="w-8 h-8 flex items-center justify-center rounded-full text-slate-600 hover:bg-slate-100">
                <ArrowRight class="w-4 h-4"/>
              </button>
            </nav>
          </div>
        </div>

        <!-- å³ä¾§ï¼šä¾§è¾¹æ  (æ¡Œé¢ç«¯ / æ¸¸æˆèœå•é£æ ¼) -->
        <aside class="hidden w-80 shrink-0 space-y-6 lg:block">
          <SidebarContent />
        </aside>

      </div>
    </main>

    <!-- ğŸ“± ç§»åŠ¨ç«¯æŠ½å±‰èœå• -->
    <Transition
      enter-active-class="transition-opacity duration-300 ease-out"
      enter-from-class="opacity-0"
      enter-to-class="opacity-100"
      leave-active-class="transition-opacity duration-200 ease-in"
      leave-from-class="opacity-100"
      leave-to-class="opacity-0"
    >
      <div v-if="mobileMenuOpen" class="fixed inset-0 z-50 bg-slate-900/40 backdrop-blur-sm lg:hidden" @click="mobileMenuOpen = false"></div>
    </Transition>

    <Transition
      enter-active-class="transition duration-300 ease-out"
      enter-from-class="translate-x-full"
      enter-to-class="translate-x-0"
      leave-active-class="transition duration-200 ease-in"
      leave-from-class="translate-x-0"
      leave-to-class="translate-x-full"
    >
      <div v-if="mobileMenuOpen" class="fixed inset-y-0 right-0 z-50 w-[85%] max-w-sm bg-[#F2F4F8] p-6 shadow-2xl lg:hidden flex flex-col h-full border-l-4 border-uma-turf">
        <div class="mb-8 flex items-center justify-between">
          <span class="text-xl font-black text-slate-800">MENU</span>
          <button @click="mobileMenuOpen = false" class="rounded-full p-2 text-slate-400 hover:bg-black/5">
            âœ•
          </button>
        </div>
        <div class="flex-1 overflow-y-auto">
           <SidebarContent />
        </div>
      </div>
    </Transition>

  </div>
</template>

<script setup lang="ts">
import { ref, defineComponent, h } from 'vue'
import { Search, Menu, DataAnalysis, ArrowRight, ArrowLeft } from '@element-plus/icons-vue'
import { Zap, TrendingUp } from 'lucide-vue-next'
import { useRouter } from 'vue-router'

const router = useRouter()
const mobileMenuOpen = ref(false)

// æ¨¡æ‹Ÿæ•°æ®
const guideList = ref([
  { title: 'èµ›é©¬å¨˜è‚²æˆå…¥é—¨ï¼šå±æ€§ä¼˜å…ˆçº§ã€è®­ç»ƒé€‰æ‹©ä¸ä¼‘æ¯èŠ‚å¥', time: 14, category: 'æ–°æ‰‹', tags: ['#è‚²æˆ', '#è®­ç»ƒ', '#å…¥é—¨'], image: '/covers/1.jpg' },
  { title: 'å› å­ç³»ç»Ÿè¯¦è§£ï¼šä¸‰æ˜Ÿå› å­æ€ä¹ˆåˆ·ï¼Ÿç»§æ‰¿ä¸é…ç§æ€è·¯', time: 18, category: 'æœºåˆ¶', tags: ['#å› å­', '#ç»§æ‰¿', '#é…ç§'], image: '/covers/2.jpg' },
  { title: 'æ”¯æ´å¡é€‰æ‹©æŒ‡å—ï¼šé€Ÿ/è€/åŠ›/æ ¹/æ™ºé…ç½®ä¸å€Ÿå¡è¦ç‚¹', time: 16, category: 'å¡ç»„', tags: ['#æ”¯æ´å¡', '#ç¼–æˆ', '#å€Ÿå¡'], image: '/covers/3.jpg' },
  { title: 'æŠ€èƒ½æ­é…ä¸å–èˆï¼šé‡‘æŠ€èƒ½ä¼˜å…ˆçº§ã€ç™½æŠ€æ€§ä»·æ¯”ä¸è”åŠ¨', time: 12, category: 'è¿›é˜¶', tags: ['#æŠ€èƒ½', '#åŠ é€Ÿ', '#ç»ˆç›˜'], image: '/covers/4.jpg' },
  { title: 'è·ç¦»/è·‘æ³•åŸºç¡€ï¼šçŸ­è·ç¦»åˆ°é•¿è·ç¦»ã€é€ƒå…ˆå·®è¿½æ€ä¹ˆé€‰', time: 11, category: 'åŸºç¡€', tags: ['#è·‘æ³•', '#è·ç¦»', '#é€‚æ€§'], image: '/covers/5.jpg' },
  { title: 'èµ›äº‹è§„åˆ’ï¼šå…³é”®æ¯”èµ›æ—¶é—´è¡¨ã€ç›®æ ‡èµ›ä¸ä¿G1ç­–ç•¥', time: 9, category: 'å®ç”¨', tags: ['#èµ›äº‹', '#G1', '#è§„åˆ’'], image: '/covers/6.jpg' },
  { title: 'å…³é”®æ•°å€¼é—¨æ§›ï¼šä¸åŒè·ç¦»å¸¸è§æ¯•ä¸šé¢æ¿ä¸é€Ÿåº¦çº¿å‚è€ƒ', time: 10, category: 'æ•°æ®', tags: ['#é¢æ¿', '#é˜ˆå€¼', '#é…é€Ÿ'], image: '/covers/7.jpg' },
  { title: 'å¯¹äººæ¯/ç«æŠ€åœºæ€è·¯ï¼šç¯å¢ƒè¯»ç›˜ã€é˜µå®¹æ¨¡æ¿ä¸å…‹åˆ¶ç‚¹', time: 15, category: 'å¯¹æˆ˜', tags: ['#å¯¹äººæ¯', '#ç«æŠ€åœº', '#ç¯å¢ƒ'], image: '/covers/8.jpg' },
  { title: 'å¸¸è§ç¿»è½¦ç‚¹æ’æŸ¥ï¼šè®­ç»ƒä¸æ¥äººã€ä½“åŠ›ç®¡ç†ã€å‡ºæˆ˜å¤±è¯¯', time: 7, category: 'æ’é”™', tags: ['#ç¿»è½¦', '#è‚²æˆ', '#ä¼˜åŒ–'], image: '/covers/9.jpg' },
])

// --- ä¾§è¾¹æ /èœå•ç»„ä»¶ (å¤ç”¨) ---
const SidebarContent = defineComponent({
  setup() {
    return () => h('div', { class: 'space-y-6' }, [
      
      // 1. å¸¸ç”¨å·¥å…· (é«˜äº®)
      h('div', { class: 'uma-card p-5 border-l-4 border-l-uma-blue' }, [
        h('h3', { class: 'mb-4 flex items-center gap-2 text-sm font-black uppercase tracking-wider text-uma-blue' }, [
          h(Zap, { class: 'h-4 w-4 stroke-[3px]' }),
          'å¿«æ·å…¥å£'
        ]),
        h('div', { class: 'space-y-3' }, [
          // ç²‰ä¸æ•°æ®å…¥å£
          h('button', { 
            class: 'group w-full relative overflow-hidden rounded-xl bg-gradient-to-r from-uma-blue to-blue-400 p-4 text-left shadow-lg shadow-blue-500/20 transition-all hover:translate-y-[-2px] hover:shadow-xl',
            onClick: () => router.push('/dashboard')
          }, [
            h('div', { class: 'relative z-10 flex items-center justify-between' }, [
               h('div', { class: 'flex items-center gap-3' }, [
                h('div', { class: 'flex h-10 w-10 items-center justify-center rounded-lg bg-white/20 text-white' }, 
                  h(DataAnalysis, { class: 'h-6 w-6' })
                ),
                h('div', [
                  h('div', { class: 'text-base font-black text-white' }, 'ç²‰ä¸æ•°æ®æŸ¥è¯¢'),
                  h('div', { class: 'text-xs text-blue-100 font-medium' }, 'ç¤¾å›¢/ä¸ªäººæ•°æ®è¿½è¸ª')
                ])
              ]),
              h(ArrowRight, { class: 'h-5 w-5 text-white/80' })
            ]),
            // è£…é¥°åœ†ç¯
            h('div', { class: 'absolute -right-4 -bottom-8 h-24 w-24 rounded-full border-4 border-white/10' })
          ]),
          
          // å…¶ä»–å·¥å…·å ä½
          h('button', { class: 'uma-btn w-full items-center gap-3 bg-white border-slate-200 text-slate-500 flex justify-center py-3 text-sm hover:text-uma-turf' }, [
             'æ›´å¤šåŠŸèƒ½å¼€å‘ä¸­...'
          ])
        ])
      ]),

      // 2. ç­›é€‰/æ ‡ç­¾
      h('div', { class: 'uma-card p-5' }, [
        h('h3', { class: 'mb-4 text-xs font-black uppercase tracking-wider text-slate-400' }, 'çƒ­é—¨æ ‡ç­¾'),
        h('div', { class: 'flex flex-wrap gap-2' }, 
          ['å…¨éƒ¨', 'æ–°æ‰‹', 'è¿›é˜¶', 'ç†è®º', 'æ•°æ®', 'æ´»åŠ¨'].map(tag => 
            h('button', { class: 'rounded-lg border-2 border-slate-100 bg-slate-50 px-3 py-1.5 text-xs font-bold text-slate-600 transition-colors hover:border-uma-turf hover:text-uma-turf hover:bg-white' }, tag)
          )
        )
      ]),

      // 3. æœ¬å‘¨æ´»åŠ¨
      h('div', { class: 'uma-card p-0 overflow-hidden' }, [
        h('div', { class: 'bg-yellow-400 px-5 py-3 flex items-center gap-2' }, [
           h(TrendingUp, { class: 'h-4 w-4 text-yellow-900 stroke-[3px]' }),
           h('h3', { class: 'text-sm font-black text-yellow-900 uppercase' }, 'æœ€æ–°åŠ¨æ€')
        ]),
        h('div', { class: 'p-4 space-y-4 bg-white' }, [
          h('div', { class: 'flex gap-3 items-start group cursor-pointer' }, [
            h('div', { class: 'h-12 w-12 shrink-0 rounded-lg bg-slate-100 border border-slate-200 flex items-center justify-center text-2xl' }, 'ğŸ“°'), 
            h('div', [
              h('h4', { class: 'text-sm font-bold text-slate-800 line-clamp-2 group-hover:text-yellow-600 transition-colors' }, 'æ–°å‰§æœ¬"Onsen"é€ŸæŠ¥ï¼šå‰§æœ¬æœºåˆ¶è¯¦è§£'),
              h('span', { class: 'text-[10px] font-bold text-slate-400' }, '2 hours ago')
            ])
          ]),
          h('div', { class: 'w-full h-[1px] bg-slate-100' }),
          h('div', { class: 'flex gap-3 items-start group cursor-pointer' }, [
             h('div', { class: 'h-12 w-12 shrink-0 rounded-lg bg-slate-100 border border-slate-200 flex items-center justify-center text-2xl' }, 'ğŸ’¬'), 
            h('div', [
              h('h4', { class: 'text-sm font-bold text-slate-800 line-clamp-2 group-hover:text-yellow-600 transition-colors' }, 'Onsenæ¯å”‰å”‰çœŸçš„è¦å¤æ´»äº†å—ï¼Ÿ'),
              h('span', { class: 'text-[10px] font-bold text-slate-400' }, '5 hours ago')
            ])
          ])
        ])
      ])

    ])
  }
})
</script>

<style scoped>
/* å¯¼èˆªæ è£…é¥°æ¡ */
header::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 100%;
  height: 4px;
  background: repeating-linear-gradient(
    45deg,
    #69C05B,
    #69C05B 10px,
    #58A04C 10px,
    #58A04C 20px
  );
}
</style>
